{% extends 'SoccerStats/base.html' %}

{% load humanize %}
{% load static %}

{% block nav %}
    <li class="nav-item"><a class="nav-link page-scroll" href="#competitions">Wettbewerbe</a></li>
    <li class="nav-item"><a class="nav-link page-scroll" href="#fixtures">Begegnungen</a></li>
    <li class="nav-item"><a class="nav-link page-scroll" href="#players">Spieler</a></li>
    <li class="nav-item"><a class="nav-link page-scroll" href="#tables">Tabellen</a></li>
    <li class="nav-item"><a class="nav-link page-scroll" href="#teams">Mannschaften</a></li>
{% endblock %}

{% block content %}
    <header id="first">
        <div class="header-content">
            <div class="inner">
                <h2>SoccerStats</h2>
                <h5 class="wow fadeIn text-normal">Intuitive Fußballdatenbank</h5>
                <hr>
                <a href="#competitions" class="btn btn-primary-outline btn-xl page-scroll wow fadeInUp">Entdecken</a>
            </div>
        </div>
    </header>

    <section id="competitions">
        <div class="container wow fadeInUp">
            <h2>Wettbewerbe</h2>
            <p class="lead">
                SoccerStats enthält Informationen über alle europäischen Topligen und führt Statistiken
                zu {{ competition.count }} Wettbewerben und {{ competition.team.count }} Mannschaften.
            </p>
            <div class="card">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>Wettbewerb</th>
                            <th>Aktueller Spieltag</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for competition in competition.list %}
                            <tr
                                    onclick="document.location='{% url 'competition:detail' competition.id %}'"
                                    style="cursor:pointer;"
                            >
                                <td>{{ competition.caption }}</td>
                                {% if competition.current_matchday == competition.number_of_matchdays %}
                                    <td>Beendet</td>
                                {% else %}
                                    <td>{{ competition.current_matchday }}/{{ competition.number_of_matchdays }}</td>
                                {% endif %}
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <hr>
        <div class="container text-center">
            <a
                    class="btn btn-lg text-normal btn-outline-primary"
                    href="{% url 'competition:list' %}"
                    role="button"
            >
                Zu den Wettbewerben
            </a>
        </div>
    </section>

    <section id="fixtures" class="bg-alt">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="m-t-0 text-primary">Begegnungen</h2>
                    <hr class="accent">
                </div>
            </div>
        </div>
        <div class="container wow fadeInUp">
            <div class="row">
                <div class="col-lg-4 col-md-4 text-center">
                    <div class="feature">
                        <i class="icon-lg ion-ios-football wow fadeInUp"></i>
                        <h6 class="text-uppercase">Durchschnittliche Tore</h6>
                        <p class="text-muted m-b-0">{{ fixture.result_avg.goals_home_team }}</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 text-center">
                    <div class="feature">
                        <i class="icon-lg ion-ios-grid-view-outline wow fadeIn" data-wow-delay=".1s"></i>
                        <h6 class="text-uppercase">Begegnungen</h6>
                        <p class="text-muted m-b-0">{{ fixture.count }}</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 text-center">
                    <div class="feature">
                        <i class="icon-lg ion-ios-football-outline wow fadeIn" data-wow-delay=".1s"></i>
                        <h6 class="text-uppercase">Durchschnittliche Gegentore</h6>
                        <p class="text-muted m-b-0">{{ fixture.result_avg.goals_away_team }}</p>
                    </div>
                </div>
            </div>
            <hr>
            {% for last_five in fixture.last_five %}
                <div class="card text-center">
                    <div class="card-header">
                        <div class="row align-items-center">
                            <div class="col">
                                <img
                                        class="card-img-top img-thumbnail img-fluid"
                                        src="{{ last_five.home_team.crest_url }}"
                                        alt="={{ last_five.home_team.name }}"
                                        style="max-height: 10em"
                                        onerror="this.src='{% static 'SoccerStats/assets/team.svg' %}'"
                                >
                            </div>
                            <div class="col">
                                <h5 class="card-title">{{ last_five.home_team.name }}</h5>
                                <h5 class="card-title">vs</h5>
                                <h5 class="card-title">{{ last_five.away_team.name }}</h5>
                            </div>
                            <div class="col">
                                <img
                                        class="card-img-top img-thumbnail img-fluid"
                                        src="{{ last_five.away_team.crest_url }}"
                                        alt="={{ last_five.away_team.name }}"
                                        style="max-height: 10em"
                                        onerror="this.src='{% static 'SoccerStats/assets/team.svg' %}'"
                                >
                            </div>
                        </div>
                    </div>
                    <div class="card-block">
                        <h6 class="card-text">
                            {{ last_five.result_set.first.goals_home_team }}
                            :
                            {{ last_five.result_set.first.goals_away_team }}
                        </h6>
                        {% if last_five.result_set.first.halftime_set.all %}
                            <p class="card-text">
                                <small>
                                    (
                                    {{ last_five.result_set.first.halftime_set.first.goals_home_team }}
                                    :
                                    {{ last_five.result_set.first.halftime_set.first.goals_away_team }}
                                    )
                                </small>
                            </p>
                        {% endif %}
                    </div>
                </div>
                {% if not forloop.last %}
                    <hr>
                {% endif %}
            {% endfor %}
        </div>
        <hr>
        <div class="container text-center">
            <a
                    class="btn btn-lg text-normal btn-outline-primary"
                    href="{% url 'fixture:list' %}"
                    role="button"
            >
                Zu den Begegnungen
            </a>
        </div>
    </section>

    <section id="players">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="m-t-0 text-primary">Spieler</h2>
                    <hr class="accent">
                </div>
            </div>
        </div>
        <div class="container-fluid wow fadeInUp">
            <div class="row">
                <div class="col-lg-6 col-md-6 text-center">
                    <div class="feature">
                        <i class="icon-lg ion-ios-body wow fadeInUp"></i>
                        <h6 class="text-uppercase">Spieler</h6>
                        <p class="text-muted m-b-0">{{ player.count }}</p>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 text-center">
                    <div class="feature">
                        <i class="icon-lg ion-social-euro wow fadeIn" data-wow-delay=".1s"></i>
                        <h6 class="text-uppercase">Durchschnittlicher Marktwert</h6>
                        <p class="text-muted m-b-0">{{ player.market_value.avg|intword }}</p>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-sm-10 offset-sm-1 col-12 offset-0">
                    <div class="card-group">
                        <div class="row">
                            {% for best_five in player.best_five %}
                                <div class="card">
                                    <img class="card-img-top img-fluid"
                                         src="{{ best_five.image }}"
                                         alt="{{ best_five.name }}"
                                    >
                                    <div class="card-header">
                                        <div class="d-flex w-100 justify-content-between">
                                            <h4 class="card-title mb-0">{{ best_five.name }}</h4>
                                            {% if best_five.jersey_number %}
                                                <h4 class="card-title mb-0">{{ best_five.jersey_number }}</h4>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <p class="mb-0">Mannschaft</p>
                                                <p class="mb-0">{{ best_five.team.name }}</p>
                                            </div>
                                        </li>
                                        <li class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <p class="mb-0">Position</p>
                                                <p class="mb-0">{{ best_five.position }}</p>
                                            </div>
                                        </li>
                                        {% if best_five.date_of_birth %}
                                            <li class="list-group-item">
                                                <div class="d-flex w-100 justify-content-between">
                                                    <p class="mb-0">Geburtsdatum</p>
                                                    <p class="mb-0">
                                                        {{ best_five.date_of_birth }}
                                                        ({{ best_five.age }})
                                                    </p>
                                                </div>
                                            </li>
                                        {% endif %}
                                        <li class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <p class="mb-0">Nationalität</p>
                                                <p class="mb-0">{{ best_five.nationality }}</p>
                                            </div>
                                        </li>
                                        {% if best_five.contract_until %}
                                            <li class="list-group-item">
                                                <div class="d-flex w-100 justify-content-between">
                                                    <p class="mb-0">Vertrag bis</p>
                                                    <p class="mb-0">{{ best_five.contract_until }}</p>
                                                </div>
                                            </li>
                                        {% endif %}
                                        {% if best_five.market_value %}
                                            <li class="list-group-item">
                                                <div class="d-flex w-100 justify-content-between">
                                                    <p class="mb-0">Marktwert</p>
                                                    <p class="mb-0">{{ best_five.market_value|intword }} €</p>
                                                </div>
                                            </li>
                                        {% endif %}
                                    </ul>
                                    <hr>
                                    <a
                                            href="{% url 'player:detail' best_five.id %}"
                                            class="btn text-normal btn-primary"
                                            role="button"
                                    >
                                        Zum Spieler
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="container text-center">
            <a
                    class="btn btn-lg text-normal btn-outline-primary"
                    href="{% url 'player:list' %}"
                    role="button"
            >
                Zu den Spielern
            </a>
        </div>
    </section>

    <aside id="tables" class="bg-alt">
        <div class="container text-center">
            <h2 class="text-primary text-center">Tabellen</h2>
            <hr class="accent">
            <br>
            <div class="row wow fadeInUpy">
                <div class="col-md-4 col-sm-6 col-12 text-center">
                    <h3>Torrekord</h3>
                    <i class="icon-lg ion-ios-speedometer-outline wow pulse"></i>
                    <h1 class="text-primary">100</h1>
                </div>
                <div class="col-md-4 col-sm-6 col-12 text-center">
                    <h3>Gegentorrekord</h3>
                    <i class="icon-lg ion-ios-location-outline wow pulse"></i>
                    <h1 class="text-primary">3421</h1>
                </div>
                <div class="col-md-4 col-sm-6 col-12 text-center">
                    <h3>Punkterekord</h3>
                    <i class="icon-lg ion-ios-pulse wow pulse"></i>
                    <h1 class="text-primary">4%</h1>
                </div>
            </div>
            <hr>
            <br>
        </div>
        <div class="container">
            <div class="card">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>Wettbewerb</th>
                            <th>Aktueller Spieltag</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for table in table.list %}
                            <tr
                                    onclick="document.location = '{% url 'table:detail' table.id %}'"
                                    style="cursor: pointer"
                            >
                                <td>{{ table.competition.caption }}</td>
                                {% if table.competition.number_of_matchdays == table.matchday %}
                                    <td>{{ table.matchday }} (Beendet)</td>
                                {% else %}
                                    <td>{{ table.matchday }}</td>
                                {% endif %}
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <hr>
        <div class="container text-center">
            <a
                    class="btn btn-lg text-normal btn-outline-primary"
                    href="{% url 'table:list' %}"
                    role="button"
            >
                Zu den Tabellen
            </a>
        </div>
    </aside>

    <section id="teams">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="m-t-0 text-primary">Mannschaften</h2>
                    <hr class="accent">
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6 text-center">
                    <div class="feature">
                        <i class="icon-lg ion-ios-people wow fadeInUp"></i>
                        <h6 class="text-uppercase">Mannschaften</h6>
                        <p class="text-muted m-b-0">{{ team.count }}</p>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 text-center">
                    <div class="feature">
                        <i class="icon-lg ion-social-euro wow fadeIn" data-wow-delay=".1s"></i>
                        <h6 class="text-uppercase">Durschnittlicher Marktwert</h6>
                        <p class="text-muted m-b-0">{{ team.squad_market_value.avg|intword }}</p>
                    </div>
                </div>
            </div>
            <hr>
            <div class="card">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>Verein</th>
                            <th>Mannschaftswert</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for best_five in team.best_five %}
                            <tr
                                    onclick="document.location = '{% url 'team:detail' best_five.id %}'"
                                    style="cursor: pointer"
                            >
                                <td>{{ best_five.name }}</td>
                                <td>{{ best_five.squad_market_value|intword }} €</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <hr>
        <div class="container text-center">
            <a
                    class="btn btn-lg text-normal btn-outline-primary"
                    href="{% url 'team:list' %}"
                    role="button"
            >
                Zu den Mannschaften
            </a>
        </div>
    </section>
{% endblock %}