{% extends 'footballData/base.html' %}

{% load list_extras %}

{% block content %}
    <section>
        {% if league_table %}
            <h5>{{ league_table.league_caption }} Tabelle</h5>
            <table>
                <thead>
                <tr>
                    <th>Position</th>
                    <th>Verein</th>
                    <th>Spiele</th>
                    <th>g.</th>
                    <th>u.</th>
                    <th>v.</th>
                    <th>Tore</th>
                    <th>Diff.</th>
                    <th>Pkte.</th>
                </tr>
                </thead>
                <tbody>
                {% for standing in league_table.standing_set.all %}
                    <tr>
                        <td>
                            {% if league_table_position_changes %}
                                <tag>
                                    {# TODO Figure out why position changes are inversed #}
                                    {% if league_table_position_changes|get_at_index:forloop.counter0 == True %}
                                        <i class="fa fa-arrow-up" aria-hidden="true"></i>
                                    {% elif league_table_position_changes|get_at_index:forloop.counter0 == False %}
                                        <i class="fa fa-arrow-down" aria-hidden="true"></i>
                                    {% else %}
                                        <i class="fa fa-arrow-right" aria-hidden="true"></i>
                                    {% endif %}
                                </tag>
                            {% endif %}
                            {{ standing.position }}
                        </td>
                        <td>{{ standing.team_name }}</td>
                        <td>{{ standing.played_games }}</td>
                        <td>{{ standing.wins }}</td>
                        <td>{{ standing.draws }}</td>
                        <td>{{ standing.losses }}</td>
                        <td>{{ standing.goals }}:{{ standing.goals_against }}</td>
                        <td>{{ standing.goal_difference }}</td>
                        <td>{{ standing.points }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>No league tables are available.</p>
        {% endif %}
    </section>
{% endblock %}